{"mappings":"imBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,kG,MCAzDC,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WCA/E,MACX,IACIC,EACAC,EAAmB,KAEvB,MAAMC,EAAWC,SAASC,cAAc,gBAClCC,EAAU,CACdC,KAAM,CACJC,WAAW,EACXC,kBAAkB,EAClBC,IAAKN,SAASC,cAAc,gBAE9BM,OAAQ,CACNC,MAAO,IACPC,QAAS,GACTH,IAAKI,MAAMC,KAAKX,SAASY,iBAAiB,qBAE5CC,SAAU,CACRP,IAAKN,SAASC,cAAc,mBAC5BO,MAAO,GACPM,OAAQ,KAIZZ,EAAQK,OAAOD,IAAIS,SAAQ,CAACC,EAAYC,KACtCD,EAAWE,MAAMC,KAAiB,IAAVF,EAAcf,EAAQK,OAAOC,MAAQ,KAAO,MACpEN,EAAQK,OAAOE,QAAQW,KAAKC,WAAWL,EAAWE,MAAMC,MAAM,IAGhE,MAAMG,EAAaC,IACjB,MAAMC,EAAuB,UAAXD,EAAEE,MAA+B,YAAXF,EAAEE,MAClCtB,KAAAuB,GAASxB,EAEjB,IACe,YAAZqB,EAAGI,MAAsBH,GAAyB,cAAXD,EAAEI,QACzCD,EAAKtB,UACN,CACA,MACEE,KAAKY,MAAEA,IACLQ,EAEJH,EAAEK,iBAEFF,EAAKtB,WAAY,EACjBc,EAAMW,OAAS,MAEfC,YAAW,KACTZ,EAAMW,OAAS,GAEf9B,EAASgC,iBACP,iBACA,IAAOL,EAAKtB,WAAY,GACzB,GACA,I,GAIPL,EAASgC,iBAAiB,SAAS,KACjChC,EAASgC,iBAAiB,UAAWT,GACrCvB,EAASgC,iBAAiB,YAAaT,GACvCvB,EAASiC,UAAUC,IAAI,oBAAoB,IAG7ClC,EAASgC,iBAAiB,QAAQ,KAChChC,EAASmC,oBAAoB,UAAWZ,GACxCvB,EAASmC,oBAAoB,YAAaZ,GAC1CvB,EAASiC,UAAUG,OAAO,oBAAoB,IAGhD,MAyBMC,EAAe,WACnB,MAAM7B,OAAEA,EAAMM,SAAEA,GAAaX,EAEvBmC,EAAY,KAsBhB,GArBA9B,EAAOE,QAAUF,EAAOE,QAAQ6B,KAAIC,GAAUA,EAjGtC,IAmGRhC,EAAOD,IAAIS,SAAQ,CAACC,EAAYC,KAC9B,MAAMsB,EAAShC,EAAOE,QAAQQ,GAC9BD,EAAWE,MAAMC,KAAO,GAAGoB,MAEvBA,IAAWhC,EAAOC,QACpBD,EAAOE,QAAQQ,GAASV,EAAOC,OAASD,EAAOD,IAAIxB,OAAS,GAAC,IAIjE+B,EAASC,OAAOC,SAAQ,CAACyB,EAAOvB,KAC9BuB,EAAMD,QA7GA,EA8GNC,EAAMlC,IAAIY,MAAMC,KAAO,GAAGqB,EAAMD,WAE5BC,EAAMD,SAAW1B,EAASL,QAC5BK,EAASP,IAAImC,YAAYD,EAAMlC,KAC/BO,EAASC,OAAO4B,OAAOzB,EAAO,G,IAKL,IAA3BJ,EAASC,OAAOhC,QAChB+B,EAASC,OAAOD,EAASC,OAAOhC,OAAS,GAAGyD,OAC1ChC,EAAOC,OAASmC,KAAKC,MAAsB,IAAhBD,KAAKE,UAAkB,KACpD,CACA,IAAIC,EAAY9C,SAAS+C,cAAc,OACvCD,EAAUE,IAAG,IAAAzD,IAAAD,GACbwD,EAAUd,UAAUC,IAAI,eAAgB,kBACxCa,EAAU5B,MAAMV,MAAQmC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiB,GAAK,KAC9DC,EAAUG,IAAM,SAEhBpC,EAASC,OAAOM,KAAK,CACnBrC,GAAI8B,EAASC,OAAOhC,OACpByD,OAAQhC,EAAOC,MAAQmC,KAAKE,UAAYtC,EAAOC,MAAQ,GACvDF,IAAKwC,IAGPjC,EAASP,IAAI4C,YAAYJ,E,CAG3BjD,IACAE,EAASE,cAAc,qBAAqBkD,YAActD,EAE1DC,EAAmBsD,sBAAsBf,GAzEtB,MACrB,MAAQlC,KAAAkD,EAAIxC,SAAEA,GAAaX,EAErBoD,EAAWD,EAAK/C,IAAIiD,wBAE1B,IAAK,MAAMC,KAAU3C,EAASC,OAAQ,CACpC,MAAM2C,EAAaD,EAAOlD,IAAIiD,wBAE9B,KAEID,EAASzB,OAAS4B,EAAWC,KAC7BJ,EAASI,IAAMD,EAAW5B,QAC1ByB,EAASK,MAAQF,EAAWtC,MAC5BmC,EAASnC,KAAOsC,EAAWE,OAI7B,OADAzD,EAAQC,KAAKE,kBAAmB,GACzB,C,CAKX,OADAH,EAAQC,KAAKE,kBAAmB,GACzB,CAAK,EAqDNuD,KACF7D,EAASE,cAAc,cAAciB,MAAM2C,QAAU,GACrDC,I,EAIJzB,G,EAGIyB,EAAgB,KAChBhE,IACFiE,qBAAqBjE,GACrBA,EAAmB,KAEnBC,EAASmC,oBAAoB,UAAWZ,GACxCvB,EAASmC,oBAAoB,YAAaZ,G,EAIxC0C,EAAY,KAChBF,IAEA/D,EAASE,cAAc,eAAeiB,MAAM2C,QAAU,OACtD9D,EAASE,cAAc,cAAciB,MAAM2C,QAAU,OAErD3D,EAAQC,KAAKC,WAAY,EACzBF,EAAQC,KAAKE,kBAAmB,EAEhCL,SAASC,cAAc,mBAAmBkD,YAAc,GACxDjD,EAAQW,SAASC,OAAS,GAE1BjB,EAAQ,EAERK,EAAQK,OAAOD,IAAIS,SAAQ,CAACC,EAAYC,KACtCD,EAAWE,MAAMC,KAAiB,IAAVF,EAAcf,EAAQK,OAAOC,MAAQ,KAAO,MACpEN,EAAQK,OAAOE,QAAQQ,GAASI,WAAWL,EAAWE,MAAMC,KAAK,IAGnEpB,EAASkE,aAAa,WAAY,KAClClE,EAASmE,QAET9B,GAAc,EAGhB+B,OAAOpC,iBAAiB,eAAgB+B,GAExC/D,EACGE,cAAc,oBACd8B,iBAAiB,QAASiC,GAC7BjE,EACGE,cAAc,mBACd8B,iBAAiB,QAASiC,GAG7BjE,EAASE,cAAc,cAAciB,MAAM2C,QAAU,MAAM,EAG7DO","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8f6dd866cb1e1e5d.js","node_modules/@parcel/runtime-js/lib/runtime-81eea64af4a46e64.js","src/js/dino.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9XUG\\\":\\\"index.ec7fe8b7.js\\\",\\\"kfaKj\\\":\\\"cactus.bb421734.png\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kfaKj\")).toString();","const dino = () => {\r\n  let speed = 3;\r\n  let score;\r\n  let animationFrameId = null;\r\n\r\n  const stageDOM = document.querySelector('.dino__stage');\r\n  const sprites = {\r\n    dino: {\r\n      isJumping: false,\r\n      isTouchingCactus: false,\r\n      dom: document.querySelector('.dino__dino'),\r\n    },\r\n    ground: {\r\n      width: 481,\r\n      offsets: [],\r\n      dom: Array.from(document.querySelectorAll('.dino__ground *')),\r\n    },\r\n    cactuses: {\r\n      dom: document.querySelector('.dino__cactuses'),\r\n      width: 33,\r\n      clones: [],\r\n    },\r\n  };\r\n\r\n  sprites.ground.dom.forEach((domElement, index) => {\r\n    domElement.style.left = index === 0 ? sprites.ground.width + 'px' : '0px';\r\n    sprites.ground.offsets.push(parseFloat(domElement.style.left));\r\n  });\r\n\r\n  const handleJump = e => {\r\n    const isJumpKey = e.code === 'Space' || e.code === 'ArrowUp';\r\n    const { dino } = sprites;\r\n\r\n    if (\r\n      ((e.type === 'keydown' && isJumpKey) || e.type === 'mousedown') &&\r\n      !dino.isJumping\r\n    ) {\r\n      const {\r\n        dom: { style },\r\n      } = dino;\r\n\r\n      e.preventDefault();\r\n\r\n      dino.isJumping = true;\r\n      style.bottom = '80%';\r\n\r\n      setTimeout(() => {\r\n        style.bottom = '';\r\n\r\n        stageDOM.addEventListener(\r\n          'transitionend',\r\n          () => (dino.isJumping = false)\r\n        );\r\n      }, 400); // Duration of the jump\r\n    }\r\n  };\r\n\r\n  stageDOM.addEventListener('focus', () => {\r\n    stageDOM.addEventListener('keydown', handleJump);\r\n    stageDOM.addEventListener('mousedown', handleJump);\r\n    stageDOM.classList.add('dino__stage-focus');\r\n  });\r\n\r\n  stageDOM.addEventListener('blur', () => {\r\n    stageDOM.removeEventListener('keydown', handleJump);\r\n    stageDOM.removeEventListener('mousedown', handleJump);\r\n    stageDOM.classList.remove('dino__stage-focus');\r\n  });\r\n\r\n  const checkCollision = () => {\r\n    const { dino, cactuses } = sprites;\r\n\r\n    const dinoRect = dino.dom.getBoundingClientRect();\r\n\r\n    for (const cactus of cactuses.clones) {\r\n      const cactusRect = cactus.dom.getBoundingClientRect();\r\n\r\n      if (\r\n        !(\r\n          dinoRect.bottom < cactusRect.top ||\r\n          dinoRect.top > cactusRect.bottom ||\r\n          dinoRect.right < cactusRect.left ||\r\n          dinoRect.left > cactusRect.right\r\n        )\r\n      ) {\r\n        sprites.dino.isTouchingCactus = true;\r\n        return true; // Колізія знайдена\r\n      }\r\n    }\r\n\r\n    sprites.dino.isTouchingCactus = false;\r\n    return false; // Колізія не знайдена\r\n  };\r\n\r\n  const animateWorld = function () {\r\n    const { ground, cactuses } = sprites;\r\n\r\n    const startMove = () => {\r\n      ground.offsets = ground.offsets.map(offset => offset - speed);\r\n\r\n      ground.dom.forEach((domElement, index) => {\r\n        const offset = ground.offsets[index];\r\n        domElement.style.left = `${offset}px`;\r\n\r\n        if (offset <= -ground.width) {\r\n          ground.offsets[index] = ground.width * (ground.dom.length - 1);\r\n        }\r\n      });\r\n\r\n      cactuses.clones.forEach((clone, index) => {\r\n        clone.offset -= speed;\r\n        clone.dom.style.left = `${clone.offset}px`;\r\n\r\n        if (clone.offset <= -cactuses.width) {\r\n          cactuses.dom.removeChild(clone.dom);\r\n          cactuses.clones.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      if (\r\n        cactuses.clones.length === 0 ||\r\n        cactuses.clones[cactuses.clones.length - 1].offset <\r\n          ground.width - (Math.floor(Math.random() * 300) + 150)\r\n      ) {\r\n        let newCactus = document.createElement('img');\r\n        newCactus.src = new URL('../images/cactus.png', import.meta.url);\r\n        newCactus.classList.add('dino__sprite', 'dino__onground');\r\n        newCactus.style.width = Math.floor(Math.random() * 15) + 10 + 'px';\r\n        newCactus.alt = 'cactus';\r\n\r\n        cactuses.clones.push({\r\n          id: cactuses.clones.length,\r\n          offset: ground.width + Math.random() * (ground.width / 8),\r\n          dom: newCactus,\r\n        });\r\n\r\n        cactuses.dom.appendChild(newCactus);\r\n      }\r\n\r\n      score++;\r\n      stageDOM.querySelector('.dino__score span').textContent = score;\r\n\r\n      animationFrameId = requestAnimationFrame(startMove);\r\n\r\n      if (checkCollision()) {\r\n        stageDOM.querySelector('.dino__end').style.display = '';\r\n        stopAnimation();\r\n      }\r\n    };\r\n\r\n    startMove();\r\n  };\r\n\r\n  const stopAnimation = () => {\r\n    if (animationFrameId) {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = null;\r\n\r\n      stageDOM.removeEventListener('keydown', handleJump);\r\n      stageDOM.removeEventListener('mousedown', handleJump);\r\n    }\r\n  };\r\n\r\n  const startGame = () => {\r\n    stopAnimation();\r\n\r\n    stageDOM.querySelector('.dino__play').style.display = 'none';\r\n    stageDOM.querySelector('.dino__end').style.display = 'none';\r\n\r\n    sprites.dino.isJumping = false;\r\n    sprites.dino.isTouchingCactus = false;\r\n\r\n    document.querySelector('.dino__cactuses').textContent = '';\r\n    sprites.cactuses.clones = [];\r\n\r\n    score = 0;\r\n\r\n    sprites.ground.dom.forEach((domElement, index) => {\r\n      domElement.style.left = index === 0 ? sprites.ground.width + 'px' : '0px';\r\n      sprites.ground.offsets[index] = parseFloat(domElement.style.left);\r\n    });\r\n\r\n    stageDOM.setAttribute('tabindex', '0');\r\n    stageDOM.focus();\r\n\r\n    animateWorld();\r\n  };\r\n\r\n  window.addEventListener('beforeunload', stopAnimation);\r\n\r\n  stageDOM\r\n    .querySelector('.dino__play .btn')\r\n    .addEventListener('click', startGame);\r\n  stageDOM\r\n    .querySelector('.dino__end .btn')\r\n    .addEventListener('click', startGame);\r\n\r\n  // Сховуємо екран завершення гри при завантаженні\r\n  stageDOM.querySelector('.dino__end').style.display = 'none';\r\n};\r\n\r\ndino();\r\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$48c06ec5535fb9ac$exports","URL","resolve","import","meta","url","toString","score","animationFrameId","stageDOM","document","querySelector","sprites","dino","isJumping","isTouchingCactus","dom","ground","width","offsets","Array","from","querySelectorAll","cactuses","clones","forEach","domElement","index","style","left","push","parseFloat","handleJump","e","isJumpKey","code","dino1","type","preventDefault","bottom","setTimeout","addEventListener","classList","add","removeEventListener","remove","animateWorld","startMove","map","offset","clone","removeChild","splice","Math","floor","random","newCactus","createElement","src","alt","appendChild","textContent","requestAnimationFrame","dino2","dinoRect","getBoundingClientRect","cactus","cactusRect","top","right","checkCollision","display","stopAnimation","cancelAnimationFrame","startGame","setAttribute","focus","window","$1523f3b7cb4c19b2$var$dino"],"version":3,"file":"index.ec7fe8b7.js.map"}